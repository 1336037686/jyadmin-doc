

# 基础框架设计-状态码设计

<br/>

| 版本   | 时间       | 修改点 | 修改人  |
| :----- | :--------- | :----- | :------ |
| v1.0.0 | 2022-05-25 | 编写   | LGX_TvT |
| -      | -          | -      | -       |

<br/>

状态码是与错误信息关联的一组数字或字母，用于约定错误状态。系统越复杂，模块越多，出错的可能性越高。既然错误无法避免，那么就需要反馈错误信息。

其中返回错误信息，一方面是为了在应用系统开发阶段，方便调试，添加相应的逻辑处理，提示用户；另一方面是应用系统运行时，可能会有潜在的异常风险，错误码能辅助定位和修复问题。



> 状态码类图设计



![image-20230608161136972](%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1-%E7%8A%B6%E6%80%81%E7%A0%81%E8%AE%BE%E8%AE%A1.assets/image-20230608161136972-16862118982311.png)



```java
/**
 * 返回状态码
 * 0000 0000
 * 前四位，表示具体模块
 * 后四位，表示具体状态
 *
 * 通用成功：0000 0200
 * 通用失败：0000 0400
 *
 * @author LGX_TvT <br>
 * @version 1.0 <br>
 * Create by 2022-04-05 16:12 <br>
 * @description: JyResultStatus <br>
 */
public enum ResultStatus {

    SUCCESS(200, ModuleSeries.BASE, "操作成功"),
    FAIL(400, ModuleSeries.BASE, "服务异常");

    // 状态码
    private final int value;

    // 模块类别
    private final ModuleSeries moduleSeries;

    // 提示
    private final String reasonPhrase;

	// ...

    /**
     * 模块类别枚举
     */
    public enum ModuleSeries {
        // 0 基础
        BASE(0);

        private final int value;

		// ...
    }
}
```



## 1、状态码设计



状态码为8位十进制数字。

基础状态码：（执行成功：`0000 0200`，执行失败：`0000 0400`）

异常状态码：

- 第 1 位：1：系统级异常，2：其他服务或业务异常；
- 第 2 位：0：其他服务，1：基础数据服务，2：系统服务，3：业务服务；

- 第 3 - 4 位：表示相关业务模块；
- 第5 - 8 位：表示顺序号；



## 2、状态码列表



| 异常类型 | 所属服务 | 所属模块 | 状态码 | 提示信息 | 备注 |
| -------- | -------- | -------- | ------ | -------- | ---- |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |
|          |          |          |        |          |      |

